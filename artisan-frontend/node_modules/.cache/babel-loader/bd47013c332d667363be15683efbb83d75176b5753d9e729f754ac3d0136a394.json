{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import PageContainer from\"./components/containers/PageContainer\";import CardContainer from\"./components/containers/CardContainer\";import DottedLoader from\"./components/loader/DottedLoader\";import{useDispatch,useSelector}from\"react-redux\";import{createUser}from\"./redux/userReducer\";import{useNavigate}from\"react-router-dom\";import{addError,clearError}from\"./redux/errorsReducer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[name,setName]=useState(\"\");const dispatch=useDispatch();const navigate=useNavigate();// Generally speaking this would be top level to show on page, or specific component UI error elements.\nconst{message,level}=useSelector(state=>state.errors);const{id,loading}=useSelector(state=>state.user);const startTalking=async()=>{try{if(name.length<=2){dispatch(addError({message:\"Name should be more than 2 characters\",level:\"error\"}));dispatch(clearError());}else{dispatch(createUser({name}));}}catch(error){console.error(error);}};useEffect(()=>{if(id&&loading===false){navigate(\"/chatpage\");}},[loading]);return/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center w-full h-full\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:`${level===\"error\"?\"bg-red-500\":level===\"warning\"?\"bg-yellow-500\":\"bg-green-500\"} text-white w-[95%] md:w-2/5 top-0 fixed mx-auto mt-5 p-3 rounded-md`,children:message}),/*#__PURE__*/_jsxs(CardContainer,{children:[/*#__PURE__*/_jsx(\"header\",{className:\"w-full pb-6 pt-14\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-center\",children:\"Lets Start Talking!\"})}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-col items-center justify-center flex-1 w-full mt-8\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex-col items-center justify-center w-3/4 mx-auto\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-900 text-base/7 text-start\",children:\"Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"block w-full rounded-md border-0 text-gray-900 text-xl dark:text-gray-50 shadow-sm ring-gray-300 ring-2 focus:ring-inset focus:ring-purple-500 focus:outline-none px-3 py-1.5\",autoComplete:\"name\",value:name,onChange:e=>setName(e.target.value.charAt(0).toUpperCase()+e.target.value.slice(1))})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:e=>{e.preventDefault();startTalking();},className:\"flex items-center justify-center w-full py-3 mt-5 font-semibold text-white bg-purple-600 rounded-md shadow-md outline-offset-2 focus-visible:outline dark:text-black dark:bg-purple-800/80 group-btn focus:outline-purple-600 hover:bg-opacity-80\",children:loading?/*#__PURE__*/_jsx(DottedLoader,{}):/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-center\",children:\"Start Talking\"})})]})})]})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","PageContainer","CardContainer","DottedLoader","useDispatch","useSelector","createUser","useNavigate","addError","clearError","jsx","_jsx","jsxs","_jsxs","App","name","setName","dispatch","navigate","message","level","state","errors","id","loading","user","startTalking","length","error","console","children","className","autoComplete","value","onChange","e","target","charAt","toUpperCase","slice","type","onClick","preventDefault"],"sources":["/home/lightberry/bucket/artisan-frontend/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PageContainer from \"./components/containers/PageContainer\";\nimport CardContainer from \"./components/containers/CardContainer\";\nimport DottedLoader from \"./components/loader/DottedLoader\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createUser, updateUserName } from \"./redux/userReducer\";\nimport { useNavigate } from \"react-router-dom\";\nimport { addError, clearError } from \"./redux/errorsReducer\";\nimport { AppDispatch, RootState } from \"./redux/store\";\nimport axios from \"axios\";\n\nfunction App() {\n\tconst [name, setName] = useState(\"\");\n\tconst dispatch = useDispatch<AppDispatch>();\n\tconst navigate = useNavigate();\n\n\t// Generally speaking this would be top level to show on page, or specific component UI error elements.\n\tconst { message, level } = useSelector((state: RootState) => state.errors);\n\tconst { id, loading } = useSelector((state: RootState) => state.user);\n\n\tconst startTalking = async () => {\n\t\ttry {\n\t\t\tif (name.length <= 2) {\n\t\t\t\tdispatch(addError({ message: \"Name should be more than 2 characters\", level: \"error\" }));\n\t\t\t\tdispatch(clearError());\n\t\t\t} else {\n\t\t\t\tdispatch(createUser({ name }));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (id && loading === false) {\n\t\t\tnavigate(\"/chatpage\");\n\t\t}\n\t}, [loading]);\n\n\treturn (\n\t\t<PageContainer>\n\t\t\t<div className=\"flex flex-col items-center justify-center w-full h-full\">\n\t\t\t\t{message && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${\n\t\t\t\t\t\t\tlevel === \"error\"\n\t\t\t\t\t\t\t\t? \"bg-red-500\"\n\t\t\t\t\t\t\t\t: level === \"warning\"\n\t\t\t\t\t\t\t\t? \"bg-yellow-500\"\n\t\t\t\t\t\t\t\t: \"bg-green-500\"\n\t\t\t\t\t\t} text-white w-[95%] md:w-2/5 top-0 fixed mx-auto mt-5 p-3 rounded-md`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{message}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<CardContainer>\n\t\t\t\t\t<header className=\"w-full pb-6 pt-14\">\n\t\t\t\t\t\t<h1 className=\"text-3xl font-extrabold text-center\">Lets Start Talking!</h1>\n\t\t\t\t\t</header>\n\t\t\t\t\t<main className=\"flex-col items-center justify-center flex-1 w-full mt-8\">\n\t\t\t\t\t\t<form className=\"flex-col items-center justify-center w-3/4 mx-auto\">\n\t\t\t\t\t\t\t<label className=\"block font-medium text-gray-900 text-base/7 text-start\">Name</label>\n\t\t\t\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"block w-full rounded-md border-0 text-gray-900 text-xl dark:text-gray-50 shadow-sm ring-gray-300 ring-2 focus:ring-inset focus:ring-purple-500 focus:outline-none px-3 py-1.5\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"name\"\n\t\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetName(e.target.value.charAt(0).toUpperCase() + e.target.value.slice(1))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tstartTalking();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-center w-full py-3 mt-5 font-semibold text-white bg-purple-600 rounded-md shadow-md outline-offset-2 focus-visible:outline dark:text-black dark:bg-purple-800/80 group-btn focus:outline-purple-600 hover:bg-opacity-80\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t\t\t<DottedLoader />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-center\">Start Talking</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</main>\n\t\t\t\t</CardContainer>\n\t\t\t</div>\n\t\t</PageContainer>\n\t);\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}